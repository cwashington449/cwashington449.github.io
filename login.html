<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
    <link rel="stylesheet" href="login_style.css">
    <link rel="stylesheet" href="assets/css/osano.css" />
    <script>
        window.dataLayer = window.dataLayer ||[];
         function gtag(){dataLayer.push(arguments);}
          gtag('consent','default',{
             'ad_storage':'denied',
             'analytics_storage':'denied',
             'ad_user_data':'denied',
             'ad_personalization':'denied',
             'personalization_storage':'denied',
             'functionality_storage':'granted',
             'security_storage':'granted',
             'wait_for_update': 500
         });
        gtag("set", "ads_data_redaction", true);
    </script>
    <!-- Osano -->
    <script src="https://cmp.osano.com/6oqitUFyT8GP2H6v/710606b4-96df-4d9d-a998-28a4c478e86e/osano.js"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RFKYS17G1M"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-RFKYS17G1M');
    </script>
    <!-- Freshpaint -->
    <script type="text/javascript">
        (function(){function p(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,a=new Array(e);t<e;t++)a[t]=r[t];return a}function v(r){if(Array.isArray(r))return p(r)}function h(r){if(typeof Symbol!="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function A(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(r,e){if(r){if(typeof r=="string")return p(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return p(r,e)}}function y(r){return v(r)||h(r)||I(r)||A()}var E=function(r,e){if(!e.__SV){try{var t,a,m=window.location,c=m.hash,x=function(n,o){return t=n.match(new RegExp(o+"=([^&]*)")),t?t[1]:null};c&&x(c,"fpState")&&(a=JSON.parse(decodeURIComponent(x(c,"fpState"))),a.action==="fpeditor"&&(window.sessionStorage.setItem("_fpcehash",c),history.replaceState(a.desiredHash||"",r.title,m.pathname+m.search)))}catch(S){}e.__loaded=!1,e.config=!1,e.__SV=2,window.freshpaint=new Proxy(e,{get:function(n,o){return n[o]!==void 0?n[o]:o==="init"?function(l,u,i){var _,d;(_=n)[d="_i"]||(_[d]=[]),n._i.push([l,u||{},i||"freshpaint"])}:function(){for(var l=arguments.length,u=new Array(l),i=0;i<l;i++)u[i]=arguments[i];var _=[o].concat(y(u));return n.push(_),new Proxy(_,{get:function(f,w){return f[w]?f[w]:function(){for(var b=arguments.length,g=new Array(b),s=0;s<b;s++)g[s]=arguments[s];f.length=0,f.push([o].concat(y(u))),f.push([w].concat(y(g)))}}})}}})}};E(document,window.freshpaint||[]);})();
        freshpaint.init("4e797cfe-05a0-403d-8a34-9dc7c05dc3c2");
        freshpaint.page();
    </script>
    <script src="https://freshpaint-cdn.com/js/4e797cfe-05a0-403d-8a34-9dc7c05dc3c2/freshpaint.js"></script>
</head>
<body>
    <div class="login-container">
        <form id="loginForm">
            <input type="email" id="email" placeholder="Email" required>
            <input type="password" id="password" placeholder="Password" required>
            <button type="submit" id="loginBtn">Login</button>
        </form>
        <div id="error-message"></div>
    </div>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js';
        import { getAuth, signInWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js';

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyD2x8YdENHZUmcjqOBPjghdjOI-jwt02d8",
            authDomain: "cw-portfolio-1f820.firebaseapp.com",
            projectId: "cw-portfolio-1f820",
            storageBucket: "cw-portfolio-1f820.appspot.com",
            messagingSenderId: "401349391323",
            appId: "1:401349391323:web:7408f3851bacf6b6712dfe",
            measurementId: "G-X3L6TBXPWR"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);

        // Get the auth instance
        const auth = getAuth(app);

        // Login form event listener
        document.getElementById('loginForm').addEventListener('submit', (event) => {
            event.preventDefault(); // Prevent default form submission

            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            signInWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    // Signed in
                    const user = userCredential.user;
                    console.log("User signed in:", user);
                    //Freshpaint Identify
                    freshpaint.identify(email);
                    // Redirect to your desired page after successful login
                    window.location.href = "fp.html"; // Replace with your actual dashboard URL
                })
                .catch((error) => {
                    // Handle errors
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    console.error("Error signing in:", errorCode, errorMessage);
                    // Display an error message to the user
                    document.getElementById('error-message').textContent = errorMessage;
                });
        });
    </script>
</body>
</html>
